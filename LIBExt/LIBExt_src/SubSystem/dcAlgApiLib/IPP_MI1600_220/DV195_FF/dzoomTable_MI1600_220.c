#include "debug.h"
#include "sensor.h"
#include "string.h"

#if MI1600_220

const UINT32 VDOZOOM_INFOR_MODE_1_TABLE[61][6] =
{
    //sie_in        pre_out
    {640,  480,  640,  480,  640,  480},
    {624,  464,  624,  464,  620,  464},
    {608,  448,  608,  448,  596,  448},
    {576,  432,  576,  432,  576,  432},
    {560,  416,  560,  416,  556,  416},
    {544,  404,  544,  404,  540,  404},
    {528,  388,  528,  388,  520,  388},
    {512,  376,  512,  376,  504,  376},
    {496,  364,  496,  364,  484,  364},
    {480,  352,  480,  352,  468,  352},
    {464,  340,  464,  340,  452,  340},
    {448,  328,  448,  328,  436,  328},
    {432,  316,  432,  316,  424,  316},
    {416,  304,  416,  304,  408,  304},
    {400,  296,  400,  296,  392,  296},
    {384,  284,  384,  284,  380,  284},
    {368,  276,  368,  276,  368,  276},
    {368,  268,  368,  268,  356,  268},
    {352,  256,  352,  256,  344,  256},
    {336,  248,  336,  248,  332,  248},
    {320,  240,  320,  240,  320,  240},
    {320,  232,  320,  232,  308,  232},
    {304,  224,  304,  224,  300,  224},
    {288,  216,  288,  216,  288,  216},
    {288,  208,  288,  208,  280,  208},
    {272,  200,  272,  200,  268,  200},
    {272,  196,  272,  196,  260,  196},
    {256,  188,  256,  188,  252,  188},
    {256,  180,  256,  180,  244,  180},
    {240,  176,  240,  176,  236,  176},
    {240,  168,  240,  168,  228,  168},
    {224,  164,  224,  164,  220,  164},
    {224,  160,  224,  160,  212,  160},
    {208,  152,  208,  152,  204,  152},
    {208,  148,  208,  148,  196,  148},
    {192,  144,  192,  144,  192,  144},
    {192,  136,  192,  136,  184,  136},
    {176,  132,  176,  132,  176,  132},
    {176,  128,  176,  128,  172,  128},
    {176,  124,  176,  124,  164,  124},
    {160,  120,  160,  120,  160,  120},
    {160,  116,  160,  116,  156,  116},
    {160,  112,  160,  112,  148,  112},
    {144,  108,  144,  108,  144,  108},
    {144,  104,  144,  104,  140,  104},
    {144,  100,  144,  100,  136,  100},
    {128,  96,   128,  96,   128,  96},
    {128,  96,   128,  96,   124,  96},
    {128,  92,   128,  92,   120,  92},
    {128,  88,   128,  88,   116,  88},
    {112,  84,   112,  84,   112,  84},
    {112,  80,   112,  80,   108,  80},
    {112,  80,   112,  80,   104,  80},
    {112,  76,   112,  76,   100,  76},
    {112,  72,   112,  72,   100,  72},
    {96,   72,   96,   72,   96,   72},
    {96,   68,   96,   68,   92,   68},
    {96,   68,   96,   68,   88,   68},
    {96,   64,   96,   64,   84,   64},
    {96,   64,   96,   64,   84,   64},
    {80,   60,   80,   60,   80,   60},
};

const UINT32 VDOZOOM_INFOR_MODE_2_TABLE[61][6] =
{
    //sie_in        sie_out           
    {1280,  712,  1280,  712,  1280,  712},
    {1248,  688,  1248,  688,  1236,  688},
    {1200,  664,  1200,  664,  1196,  664},
    {1152,  640,  1152,  640,  1152,  640},
    {1120,  620,  1120,  620,  1116,  620},
    {1088,  600,  1088,  600,  1076,  600},
    {1040,  580,  1040,  580,  1040,  580},
    {1008,  560,  1008,  560,  1004,  560},
    {976,   540,  976,   540,  972,   540},
    {944,   520,  944,   520,  936,   520},
    {912,   504,  912,   504,  904,   504},
    {880,   488,  880,   488,  876,   488},
    {848,   468,  848,   468,  844,   468},
    {816,   452,  816,   452,  816,   452},
    {800,   440,  800,   440,  788,   440},
    {768,   424,  768,   424,  760,   424},
    {736,   408,  736,   408,  736,   408},
    {720,   396,  720,   396,  712,   396},
    {688,   380,  688,   380,  684,   380},
    {672,   368,  672,   368,  664,   368},
    {640,   356,  640,   356,  640,   356},
    {624,   344,  624,   344,  620,   344},
    {608,   332,  608,   332,  596,   332},
    {576,   320,  576,   320,  576,   320},
    {560,   308,  560,   308,  556,   308},
    {544,   300,  544,   300,  540,   300},
    {528,   288,  528,   288,  520,   288},
    {512,   280,  512,   280,  504,   280},
    {496,   268,  496,   268,  484,   268},
    {480,   260,  480,   260,  468,   260},
    {464,   252,  464,   252,  452,   252},
    {448,   244,  448,   244,  436,   244},
    {432,   236,  432,   236,  424,   236},
    {416,   228,  416,   228,  408,   228},
    {400,   220,  400,   220,  392,   220},
    {384,   212,  384,   212,  380,   212},
    {368,   204,  368,   204,  368,   204},
    {368,   196,  368,   196,  356,   196},
    {352,   192,  352,   192,  344,   192},
    {336,   184,  336,   184,  332,   184},
    {320,   180,  320,   180,  320,   180},
    {320,   172,  320,   172,  308,   172},
    {304,   168,  304,   168,  300,   168},
    {288,   160,  288,   160,  288,   160},
    {288,   156,  288,   156,  280,   156},
    {272,   148,  272,   148,  268,   148},
    {272,   144,  272,   144,  260,   144},
    {256,   140,  256,   140,  252,   140},
    {256,   136,  256,   136,  244,   136},
    {240,   132,  240,   132,  236,   132},
    {240,   124,  240,   124,  228,   124},
    {224,   120,  224,   120,  220,   120},
    {224,   116,  224,   116,  212,   116},
    {208,   112,  208,   112,  204,   112},
    {208,   108,  208,   108,  196,   108},
    {192,   104,  192,   104,  192,   104},
    {192,   104,  192,   104,  184,   104},
    {176,   100,  176,   100,  176,   100},
    {176,   96,   176,   96,   172,   96}, 
    {176,   92,   176,   92,   164,   92}, 
    {160,   88,   160,   88,   160,   88}, 
};

const UINT32 VDOZOOM_INFOR_MODE_3_TABLE[61][6] =
{
    //sie_in        pre_out
/*    
    {1440,  1080,   1440,   1080},  //10
    {1404,  1052,   1392,   1044},  //11
    {1372,  1028,   1360,   1020},  //12
    {1340,  1004,   1328,   996},   //13
    {1312,  984,    1312,   984},   //14
    {1280,  960,    1280,   960},   //15
    {1252,  940,    1248,   936},   //16
    {1224,  916,    1216,   912},   //17
    {1196,  896,    1184,   888},   //18
    {1168,  876,    1168,   876},   //19
    {1140,  856,    1136,   852},   //20
    {1116,  836,    1104,   828},   //21
    {1088,  816,    1088,   816},   //22
    {1064,  800,    1056,   792},   //23
    {1040,  780,    1040,   780},   //24
    {1016,  764,    1008,   756},   //25
    {992,   744,    992,    744},   //26
    {972,   728,    960,    720},   //27
    {948,   712,    944,    708},   //28
    {928,   696,    928,    696},   //29
    {904,   680,    896,    672},   //30
    {884,   664,    880,    660},   //31
    {864,   648,    864,    648},   //32
    {844,   632,    832,    624},   //33
    {824,   620,    816,    612},   //34
    {808,   604,    800,    600},   //35
    {788,   592,    784,    588},   //36
    {772,   576,    768,    576},   //37
    {752,   564,    752,    564},   //38
    {736,   552,    736,    552},   //39
    {720,   540,    720,    540},   //40
    {704,   528,    704,    528},   //41
    {688,   516,    688,    516},   //42
    {672,   504,    672,    504},   //43
    {656,   492,    656,    492},   //44
    {640,   480,    640,    480},   //45
    {624,   468,    624,    468},   //46
    {612,   460,    608,    456},   //47
    {596,   448,    592,    444},   //48
    {584,   436,    576,    432},   //49
    {572,   428,    560,    420},   //50
    {556,   416,    544,    408},   //51
    {544,   408,    544,    408},   //52
    {532,   400,    528,    396},   //53
    {520,   388,    512,    384},   //54
    {508,   380,    496,    372},   //55
    {496,   372,    496,    372},   //56
    {484,   364,    480,    360},   //57
    {472,   356,    464,    348},   //58
    {464,   348,    464,    348},   //59
    {452,   340,    448,    336},   //60
    {444,   332,    432,    324},   //61
    {432,   324,    432,    324},   //62
    {424,   316,    416,    312},   //63
    {412,   308,    400,    300},   //64
    {404,   300,    400,    300},   //65
    {392,   296,    384,    288},   //66
    {384,   288,    384,    288},   //67
    {376,   280,    368,    276},   //68
    {368,   276,    368,    276},   //69
    {360,   268,    352,    264},   //70
*/
    {1424,  1068,  1424,  1068,  1424,  1068},
    {1376,  1032,  1376,  1032,  1376,  1032},
    {1328,  996,   1328,  996,   1328,  996}, 
    {1296,  964,   1296,  964,   1284,  964}, 
    {1248,  928,   1248,  928,   1240,  928}, 
    {1200,  900,   1200,  900,   1196,  900}, 
    {1168,  868,   1168,  868,   1156,  868}, 
    {1120,  836,   1120,  836,   1116,  836}, 
    {1088,  808,   1088,  808,   1080,  808}, 
    {1056,  780,   1056,  780,   1044,  780}, 
    {1008,  756,   1008,  756,   1008,  756}, 
    {976,   728,   976,   728,   972,   728}, 
    {944,   704,   944,   704,   940,   704}, 
    {912,   680,   912,   680,   908,   680}, 
    {880,   656,   880,   656,   876,   656}, 
    {848,   636,   848,   636,   848,   636}, 
    {816,   612,   816,   612,   816,   612}, 
    {800,   592,   800,   592,   792,   592}, 
    {768,   572,   768,   572,   764,   572}, 
    {736,   552,   736,   552,   736,   552}, 
    {720,   536,   720,   536,   712,   536}, 
    {688,   516,   688,   516,   688,   516}, 
    {672,   500,   672,   500,   664,   500}, 
    {640,   480,   640,   480,   640,   480}, 
    {624,   464,   624,   464,   620,   464}, 
    {608,   448,   608,   448,   600,   448}, 
    {592,   432,   592,   432,   580,   432}, 
    {560,   420,   560,   420,   560,   420}, 
    {544,   404,   544,   404,   540,   404}, 
    {528,   392,   528,   392,   520,   392}, 
    {512,   376,   512,   376,   504,   376}, 
    {496,   364,   496,   364,   488,   364}, 
    {480,   352,   480,   352,   468,   352}, 
    {464,   340,   464,   340,   452,   340}, 
    {448,   328,   448,   328,   440,   328}, 
    {432,   316,   432,   316,   424,   316}, 
    {416,   308,   416,   308,   408,   308}, 
    {400,   296,   400,   296,   396,   296}, 
    {384,   288,   384,   288,   380,   288}, 
    {368,   276,   368,   276,   368,   276}, 
    {368,   268,   368,   268,   356,   268}, 
    {352,   256,   352,   256,   344,   256}, 
    {336,   248,   336,   248,   332,   248}, 
    {320,   240,   320,   240,   320,   240}, 
    {320,   232,   320,   232,   308,   232}, 
    {304,   224,   304,   224,   300,   224}, 
    {288,   216,   288,   216,   288,   216}, 
    {288,   208,   288,   208,   280,   208}, 
    {272,   204,   272,   204,   268,   204}, 
    {272,   196,   272,   196,   260,   196}, 
    {256,   188,   256,   188,   252,   188}, 
    {256,   184,   256,   184,   244,   184}, 
    {240,   176,   240,   176,   236,   176}, 
    {240,   172,   240,   172,   228,   172}, 
    {224,   164,   224,   164,   220,   164}, 
    {224,   160,   224,   160,   212,   160}, 
    {208,   152,   208,   152,   204,   152}, 
    {208,   148,   208,   148,   196,   148}, 
    {192,   144,   192,   144,   192,   144}, 
    {192,   140,   192,   140,   184,   140}, 
    {192,   132,   192,   132,   180,   132}, 
};


const UINT32 VDOZOOM_INFOR_MODE_4_TABLE[61][6] =
{
    //sie_in        pre_out
    {1424,  536,   1424,  536,   1424,  536},
    {1376,  516,   1376,  516,   1376,  516},
    {1328,  500,   1328,  500,   1328,  500},
    {1296,  484,   1296,  484,   1284,  484},
    {1248,  468,   1248,  468,   1240,  468},
    {1200,  452,   1200,  452,   1196,  452},
    {1168,  436,   1168,  436,   1156,  436},
    {1120,  420,   1120,  420,   1116,  420},
    {1088,  408,   1088,  408,   1080,  408},
    {1056,  392,   1056,  392,   1044,  392},
    {1008,  380,   1008,  380,   1008,  380},
    {976,   368,   976,   368,   972,   368},
    {944,   352,   944,   352,   940,   352},
    {912,   340,   912,   340,   908,   340},
    {880,   328,   880,   328,   876,   328},
    {848,   320,   848,   320,   848,   320},
    {816,   308,   816,   308,   816,   308},
    {800,   296,   800,   296,   792,   296},
    {768,   288,   768,   288,   764,   288},
    {736,   276,   736,   276,   736,   276},
    {720,   268,   720,   268,   712,   268},
    {688,   260,   688,   260,   688,   260},
    {672,   252,   672,   252,   664,   252},
    {640,   240,   640,   240,   640,   240},
    {624,   232,   624,   232,   620,   232},
    {608,   224,   608,   224,   600,   224},
    {592,   216,   592,   216,   580,   216},
    {560,   212,   560,   212,   560,   212},
    {544,   204,   544,   204,   540,   204},
    {528,   196,   528,   196,   520,   196},
    {512,   188,   512,   188,   504,   188},
    {496,   184,   496,   184,   488,   184},
    {480,   176,   480,   176,   468,   176},
    {464,   172,   464,   172,   452,   172},
    {448,   164,   448,   164,   440,   164},
    {432,   160,   432,   160,   424,   160},
    {416,   152,   416,   152,   408,   152},
    {400,   148,   400,   148,   396,   148},
    {384,   144,   384,   144,   380,   144},
    {368,   140,   368,   140,   368,   140},
    {368,   136,   368,   136,   356,   136},
    {352,   128,   352,   128,   344,   128},
    {336,   124,   336,   124,   332,   124},
    {320,   120,   320,   120,   320,   120},
    {320,   116,   320,   116,   308,   116},
    {304,   112,   304,   112,   300,   112},
    {288,   108,   288,   108,   288,   108},
    {288,   104,   288,   104,   280,   104},
    {272,   100,   272,   100,   268,   100},
    {272,   100,   272,   100,   260,   100},
    {256,   96 ,   256,   96 ,   252,   96 },
    {256,   92 ,   256,   92 ,   244,   92 },
    {240,   88 ,   240,   88 ,   236,   88 },
    {240,   84 ,   240,   84 ,   228,   84 },
    {224,   84 ,   224,   84 ,   220,   84 },
    {224,   80 ,   224,   80 ,   212,   80 },
    {208,   76 ,   208,   76 ,   204,   76 },
    {208,   76 ,   208,   76 ,   196,   76 },
    {192,   72 ,   192,   72 ,   192,   72 },
    {192,   68 ,   192,   68 ,   184,   68 },
    {192,   68 ,   192,   68 ,   180,   68 },
};

const UINT32 VDOZOOM_INFOR_MODE_FULL_TABLE[61][6] =
{
    //sie_in        pre_out
/*    
    {1440,  1080,   1440,   1080},  //10
    {1404,  1052,   1392,   1044},  //11
    {1372,  1028,   1360,   1020},  //12
    {1340,  1004,   1328,   996},   //13
    {1312,  984,    1312,   984},   //14
    {1280,  960,    1280,   960},   //15
    {1252,  940,    1248,   936},   //16
    {1224,  916,    1216,   912},   //17
    {1196,  896,    1184,   888},   //18
    {1168,  876,    1168,   876},   //19
    {1140,  856,    1136,   852},   //20
    {1116,  836,    1104,   828},   //21
    {1088,  816,    1088,   816},   //22
    {1064,  800,    1056,   792},   //23
    {1040,  780,    1040,   780},   //24
    {1016,  764,    1008,   756},   //25
    {992,   744,    992,    744},   //26
    {972,   728,    960,    720},   //27
    {948,   712,    944,    708},   //28
    {928,   696,    928,    696},   //29
    {904,   680,    896,    672},   //30
    {884,   664,    880,    660},   //31
    {864,   648,    864,    648},   //32
    {844,   632,    832,    624},   //33
    {824,   620,    816,    612},   //34
    {808,   604,    800,    600},   //35
    {788,   592,    784,    588},   //36
    {772,   576,    768,    576},   //37
    {752,   564,    752,    564},   //38
    {736,   552,    736,    552},   //39
    {720,   540,    720,    540},   //40
    {704,   528,    704,    528},   //41
    {688,   516,    688,    516},   //42
    {672,   504,    672,    504},   //43
    {656,   492,    656,    492},   //44
    {640,   480,    640,    480},   //45
    {624,   468,    624,    468},   //46
    {612,   460,    608,    456},   //47
    {596,   448,    592,    444},   //48
    {584,   436,    576,    432},   //49
    {572,   428,    560,    420},   //50
    {556,   416,    544,    408},   //51
    {544,   408,    544,    408},   //52
    {532,   400,    528,    396},   //53
    {520,   388,    512,    384},   //54
    {508,   380,    496,    372},   //55
    {496,   372,    496,    372},   //56
    {484,   364,    480,    360},   //57
    {472,   356,    464,    348},   //58
    {464,   348,    464,    348},   //59
    {452,   340,    448,    336},   //60
    {444,   332,    432,    324},   //61
    {432,   324,    432,    324},   //62
    {424,   316,    416,    312},   //63
    {412,   308,    400,    300},   //64
    {404,   300,    400,    300},   //65
    {392,   296,    384,    288},   //66
    {384,   288,    384,    288},   //67
    {376,   280,    368,    276},   //68
    {368,   276,    368,    276},   //69
    {360,   268,    352,    264},   //70
*/
        {1424,  1068,  1424,  1068,  1424,  1068},
        {1376,  1032,  1376,  1032,  1376,  1032},
        {1328,  996,   1328,  996,   1328,  996}, 
        {1296,  964,   1296,  964,   1284,  964}, 
        {1248,  928,   1248,  928,   1240,  928}, 
        {1200,  900,   1200,  900,   1196,  900}, 
        {1168,  868,   1168,  868,   1156,  868}, 
        {1120,  836,   1120,  836,   1116,  836}, 
        {1088,  808,   1088,  808,   1080,  808}, 
        {1056,  780,   1056,  780,   1044,  780}, 
        {1008,  756,   1008,  756,   1008,  756}, 
        {976,   728,   976,   728,   972,   728}, 
        {944,   704,   944,   704,   940,   704}, 
        {912,   680,   912,   680,   908,   680}, 
        {880,   656,   880,   656,   876,   656}, 
        {848,   636,   848,   636,   848,   636}, 
        {816,   612,   816,   612,   816,   612}, 
        {800,   592,   800,   592,   792,   592}, 
        {768,   572,   768,   572,   764,   572}, 
        {736,   552,   736,   552,   736,   552}, 
        {720,   536,   720,   536,   712,   536}, 
        {688,   516,   688,   516,   688,   516}, 
        {672,   500,   672,   500,   664,   500}, 
        {640,   480,   640,   480,   640,   480}, 
        {624,   464,   624,   464,   620,   464}, 
        {608,   448,   608,   448,   600,   448}, 
        {592,   432,   592,   432,   580,   432}, 
        {560,   420,   560,   420,   560,   420}, 
        {544,   404,   544,   404,   540,   404}, 
        {528,   392,   528,   392,   520,   392}, 
        {512,   376,   512,   376,   504,   376}, 
        {496,   364,   496,   364,   488,   364}, 
        {480,   352,   480,   352,   468,   352}, 
        {464,   340,   464,   340,   452,   340}, 
        {448,   328,   448,   328,   440,   328}, 
        {432,   316,   432,   316,   424,   316}, 
        {416,   308,   416,   308,   408,   308}, 
        {400,   296,   400,   296,   396,   296}, 
        {384,   288,   384,   288,   380,   288}, 
        {368,   276,   368,   276,   368,   276}, 
        {368,   268,   368,   268,   356,   268}, 
        {352,   256,   352,   256,   344,   256}, 
        {336,   248,   336,   248,   332,   248}, 
        {320,   240,   320,   240,   320,   240}, 
        {320,   232,   320,   232,   308,   232}, 
        {304,   224,   304,   224,   300,   224}, 
        {288,   216,   288,   216,   288,   216}, 
        {288,   208,   288,   208,   280,   208}, 
        {272,   204,   272,   204,   268,   204}, 
        {272,   196,   272,   196,   260,   196}, 
        {256,   188,   256,   188,   252,   188}, 
        {256,   184,   256,   184,   244,   184}, 
        {240,   176,   240,   176,   236,   176}, 
        {240,   172,   240,   172,   228,   172}, 
        {224,   164,   224,   164,   220,   164}, 
        {224,   160,   224,   160,   212,   160}, 
        {208,   152,   208,   152,   204,   152}, 
        {208,   148,   208,   148,   196,   148}, 
        {192,   144,   192,   144,   192,   144}, 
        {192,   140,   192,   140,   184,   140}, 
        {192,   132,   192,   132,   180,   132}, 
};

UINT32 gDzoomTbl[61][6];
UINT32*  SenMode2Tbl(UINT32 SenMode,UINT32 *DzMaxidx)
{
    switch(SenMode)
    {
        //senmode,follow sensor driver,return corresponding dzoom tbl
        case SENSOR_MODE_640X480:
            memcpy(gDzoomTbl,VDOZOOM_INFOR_MODE_1_TABLE,sizeof(UINT32)*61*6);
            break;

        case SENSOR_MODE_1280X720:
            memcpy(gDzoomTbl,VDOZOOM_INFOR_MODE_2_TABLE,sizeof(UINT32)*61*6);
            break;

        case SENSOR_MODE_1440X1080:
            memcpy(gDzoomTbl,VDOZOOM_INFOR_MODE_3_TABLE,sizeof(UINT32)*61*6);
            break;

        case SENSOR_MODE_1440X540:
            memcpy(gDzoomTbl,VDOZOOM_INFOR_MODE_4_TABLE,sizeof(UINT32)*61*6);
            break;

        case SENSOR_MODE_FULL:
            memcpy(gDzoomTbl,VDOZOOM_INFOR_MODE_FULL_TABLE,sizeof(UINT32)*61*6);
            break;
            
        default:
            debug_err(("%d %s\r\n",__LINE__,__func__));
        break;
    }
    *DzMaxidx = (61 -1+10);
    return gDzoomTbl[0];
}
#endif
