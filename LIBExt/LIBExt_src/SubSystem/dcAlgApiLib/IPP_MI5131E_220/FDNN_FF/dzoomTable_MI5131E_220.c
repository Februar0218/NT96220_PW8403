#include "debug.h"
#include "sensor.h"
#include "string.h"

#if MI5131E_220

const UINT32 VDOZOOM_INFOR_MODE_1_TABLE[61][6] =
{
    //sie_in        pre_out
    {640,  480,  640,  480,  640,  480},
    {624,  464,  624,  464,  620,  464},
    {608,  448,  608,  448,  596,  448},
    {576,  432,  576,  432,  576,  432},
    {560,  416,  560,  416,  556,  416},
    {544,  404,  544,  404,  540,  404},
    {528,  388,  528,  388,  520,  388},
    {512,  376,  512,  376,  504,  376},
    {496,  364,  496,  364,  484,  364},
    {480,  352,  480,  352,  468,  352},
    {464,  340,  464,  340,  452,  340},
    {448,  328,  448,  328,  436,  328},
    {432,  316,  432,  316,  424,  316},
    {416,  304,  416,  304,  408,  304},
    {400,  296,  400,  296,  392,  296},
    {384,  284,  384,  284,  380,  284},
    {368,  276,  368,  276,  368,  276},
    {368,  268,  368,  268,  356,  268},
    {352,  256,  352,  256,  344,  256},
    {336,  248,  336,  248,  332,  248},
    {320,  240,  320,  240,  320,  240},
    {320,  232,  320,  232,  308,  232},
    {304,  224,  304,  224,  300,  224},
    {288,  216,  288,  216,  288,  216},
    {288,  208,  288,  208,  280,  208},
    {272,  200,  272,  200,  268,  200},
    {272,  196,  272,  196,  260,  196},
    {256,  188,  256,  188,  252,  188},
    {256,  180,  256,  180,  244,  180},
    {240,  176,  240,  176,  236,  176},
    {240,  168,  240,  168,  228,  168},
    {224,  164,  224,  164,  220,  164},
    {224,  160,  224,  160,  212,  160},
    {208,  152,  208,  152,  204,  152},
    {208,  148,  208,  148,  196,  148},
    {192,  144,  192,  144,  192,  144},
    {192,  136,  192,  136,  184,  136},
    {176,  132,  176,  132,  176,  132},
    {176,  128,  176,  128,  172,  128},
    {176,  124,  176,  124,  164,  124},
    {160,  120,  160,  120,  160,  120},
    {160,  116,  160,  116,  156,  116},
    {160,  112,  160,  112,  148,  112},
    {144,  108,  144,  108,  144,  108},
    {144,  104,  144,  104,  140,  104},
    {144,  100,  144,  100,  136,  100},
    {128,  96,   128,  96,   128,  96},
    {128,  96,   128,  96,   124,  96},
    {128,  92,   128,  92,   120,  92},
    {128,  88,   128,  88,   116,  88},
    {112,  84,   112,  84,   112,  84},
    {112,  80,   112,  80,   108,  80},
    {112,  80,   112,  80,   104,  80},
    {112,  76,   112,  76,   100,  76},
    {112,  72,   112,  72,   100,  72},
    {96,   72,   96,   72,   96,   72},
    {96,   68,   96,   68,   92,   68},
    {96,   68,   96,   68,   88,   68},
    {96,   64,   96,   64,   84,   64},
    {96,   64,   96,   64,   84,   64},
    {80,   60,   80,   60,   80,   60},
};



const UINT32 VDOZOOM_INFOR_MODE_2_TABLE[61][6] =
{
    //sie_in        pre_out
    {1280,  960,  1280,  960,   1280,  960},
    {1232,  916,  1232,  916,   1220,  916},
    {1184,  884,  1184,  884,   1180,  884},
    {1152,  856,  1152,  856,   1140,  856},
    {1104,  824,  1104,  824,   1100,  824},
    {1072,  796,  1072,  796,   1064,  796},
    {1040,  772,  1040,  772,   1028,  772},
    {992,   744,  992,   744,   992,   744},
    {960,   720,  960,   720,   956,   720},
    {928,   692,  928,   692,   924,   692},
    {896,   672,  896,   672,   892,   672},
    {864,   648,  864,   648,   864,   648},
    {832,   624,  832,   624,   832,   624},
    {816,   604,  816,   604,   804,   604},
    {784,   584,  784,   584,   780,   584},
    {752,   564,  752,   564,   752,   564},
    {736,   544,  736,   544,   724,   544},
    {704,   524,  704,   524,   700,   524},
    {688,   508,  688,   508,   676,   508},
    {656,   492,  656,   492,   656,   492},
    {640,   476,  640,   476,   632,   476},
    {624,   456,  624,   456,   612,   456},
    {592,   444,  592,   444,   588,   444},
    {576,   428,  576,   428,   568,   428},
    {560,   412,  560,   412,   552,   412},
    {544,   400,  544,   400,   532,   400},
    {512,   384,  512,   384,   512,   384},
    {496,   372,  496,   372,   496,   372},
    {480,   360,  480,   360,   480,   360},
    {464,   348,  464,   348,   464,   348},
    {448,   336,  448,   336,   448,   336},
    {432,   324,  432,   324,   432,   324},
    {416,   312,  416,   312,   416,   312},
    {416,   304,  416,   304,   404,   304},
    {400,   292,  400,   292,   388,   292},
    {384,   280,  384,   280,   376,   280},
    {368,   272,  368,   272,   364,   272},
    {352,   264,  352,   264,   352,   264},
    {352,   256,  352,   256,   340,   256},
    {336,   244,  336,   244,   328,   244},
    {320,   236,  320,   236,   316,   236},
    {304,   228,  304,   228,   304,   228},
    {304,   220,  304,   220,   296,   220},
    {288,   212,  288,   212,   284,   212},
    {288,   208,  288,   208,   276,   208},
    {272,   200,  272,   200,   264,   200},
    {256,   192,  256,   192,   256,   192},
    {256,   184,  256,   184,   248,   184},
    {240,   180,  240,   180,   240,   180},
    {240,   172,  240,   172,   232,   172},
    {224,   168,  224,   168,   224,   168},
    {224,   160,  224,   160,   216,   160},
    {208,   156,  208,   156,   208,   156},
    {208,   152,  208,   152,   200,   152},
    {208,   144,  208,   144,   196,   144},
    {192,   140,  192,   140,   188,   140},
    {192,   136,  192,   136,   180,   136},
    {176,   132,  176,   132,   176,   132},
    {176,   128,  176,   128,   168,   128},
    {176,   128,  176,   128,   168,   128},//{176,   124,  176,   124,   164,   124},
    {160,   120,  160,   120,   160,   120},
};

//full resolution
const UINT32 VDOZOOM_INFOR_MODE_3_TABLE[61][6] =
{
    //sie_in        pre_out
    {2560,  1920,  2560,  1920,  2560,  1920},
    {2448,  1832,  2448,  1832,  2440,  1832},
    {2368,  1768,  2368,  1768,  2360,  1768},
    {2288,  1708,  2288,  1708,  2280,  1708},
    {2208,  1652,  2208,  1652,  2200,  1652},
    {2128,  1596,  2128,  1596,  2124,  1596},
    {2064,  1540,  2064,  1540,  2052,  1540},
    {1984,  1488,  1984,  1488,  1984,  1488},
    {1920,  1436,  1920,  1436,  1916,  1436},
    {1856,  1388,  1856,  1388,  1852,  1388},
    {1792,  1340,  1792,  1340,  1788,  1340},
    {1728,  1296,  1728,  1296,  1728,  1296},
    {1680,  1252,  1680,  1252,  1668,  1252},
    {1616,  1208,  1616,  1208,  1612,  1208},
    {1568,  1168,  1568,  1168,  1556,  1168},
    {1504,  1128,  1504,  1128,  1504,  1128},
    {1456,  1088,  1456,  1088,  1452,  1088},
    {1408,  1052,  1408,  1052,  1404,  1052},
    {1360,  1016,  1360,  1016,  1356,  1016},
    {1312,  980,   1312,  980,   1308,  980},
    {1264,  948,   1264,  948,   1264,  948},
    {1232,  916,   1232,  916,   1220,  916},
    {1184,  884,   1184,  884,   1180,  884},
    {1152,  856,   1152,  856,   1140,  856},
    {1104,  824,   1104,  824,   1100,  824},
    {1072,  796,   1072,  796,   1064,  796},
    {1040,  772,   1040,  772,   1028,  772},
    {992,   744,   992,   744,   992,   744},
    {960,   720,   960,   720,   956,   720},
    {928,   692,   928,   692,   924,   692},
    {896,   672,   896,   672,   892,   672},
    {864,   648,   864,   648,   864,   648},
    {832,   624,   832,   624,   832,   624},
    {816,   604,   816,   604,   804,   604},
    {784,   584,   784,   584,   780,   584},
    {752,   564,   752,   564,   752,   564},
    {736,   544,   736,   544,   724,   544},
    {704,   524,   704,   524,   700,   524},
    {688,   508,   688,   508,   676,   508},
    {656,   492,   656,   492,   656,   492},
    {640,   476,   640,   476,   632,   476},
    {624,   456,   624,   456,   612,   456},
    {592,   444,   592,   444,   588,   444},
    {576,   428,   576,   428,   568,   428},
    {560,   412,   560,   412,   552,   412},
    {544,   400,   544,   400,   532,   400},
    {512,   384,   512,   384,   512,   384},
    {496,   372,   496,   372,   496,   372},
    {480,   360,   480,   360,   480,   360},
    {464,   348,   464,   348,   464,   348},
    {448,   336,   448,   336,   448,   336},
    {432,   324,   432,   324,   432,   324},
    {416,   312,   416,   312,   416,   312},
    {416,   304,   416,   304,   404,   304},
    {400,   292,   400,   292,   388,   292},
    {384,   280,   384,   280,   376,   280},
    {368,   272,   368,   272,   364,   272},
    {352,   264,   352,   264,   352,   264},
    {352,   256,   352,   256,   340,   256},
    {336,   244,   336,   244,   328,   244},
    {320,   236,   320,   236,   316,   236},
};

UINT32 gDzoomTbl[61][6];
UINT32*  SenMode2Tbl(UINT32 SenMode,UINT32 *DzMaxidx)
{
    switch(SenMode)
    {
        //senmode,follow sensor driver,return corresponding dzoom tbl
        case SENSOR_MODE_640X480:
            memcpy(gDzoomTbl,VDOZOOM_INFOR_MODE_1_TABLE,sizeof(UINT32)*61*6);
            break;

        case SENSOR_MODE_1280X960:
            memcpy(gDzoomTbl,VDOZOOM_INFOR_MODE_2_TABLE,sizeof(UINT32)*61*6);
            break;

        case SENSOR_MODE_FULL:
            memcpy(gDzoomTbl,VDOZOOM_INFOR_MODE_3_TABLE,sizeof(UINT32)*61*6);
            break;
        default:
            debug_err(("%d %s\r\n",__LINE__,__func__));
        break;
    }
    *DzMaxidx = (61 -1+10);
    return gDzoomTbl[0];
}
#endif
